<form class="form-product-ajax" method='POST' action='{% url "carts:update" %}' data-endpoint='{% url "carts:update" %}' class="form">
    <!-- this class is made to make the form unique -->
    {% csrf_token %}
    
    <input type="hidden" name="product_id" value='{{product.id}}'/>


    {% if in_cart %}
        <button type="submit" class="btn btn-link btn-sm" style="padding:0px; cursor:pointer">Remove</button>

    {% else %}
        <span class="submit-span">
        {% if product in cart.products.all %}
            In cart <button type='submit' class='btn btn-link'>Remove</button>
        {% else %}
            <button class='btn btn-success' type='submit'>Add to Cart</button>
        {% endif %}
        </span>
    {% endif %}

</form>